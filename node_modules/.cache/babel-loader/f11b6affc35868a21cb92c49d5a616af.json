{"ast":null,"code":"/**\n * Copyright IBM Corp. 2016, 2018\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport { getCellId } from './cells';\n/**\n * Normalize a collection of rows with the given headers.\n *\n * @param {Array<object>} rows\n * @param {Array<object>} headers\n * @returns {object}\n */\n\nvar normalize = function normalize(rows, headers) {\n  var prevState = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var prevRowsByIds = prevState.rowsById;\n  var rowIds = new Array(rows.length);\n  var rowsById = {};\n  var cellsById = {};\n  rows.forEach(function (row, i) {\n    rowIds[i] = row.id; // Initialize the row info and state values, namely for selection and\n    // expansion\n\n    var id = row.id,\n        _row$isSelected = row.isSelected,\n        isSelected = _row$isSelected === void 0 ? false : _row$isSelected,\n        _row$isExpanded = row.isExpanded,\n        isExpanded = _row$isExpanded === void 0 ? false : _row$isExpanded,\n        _row$disabled = row.disabled,\n        disabled = _row$disabled === void 0 ? false : _row$disabled;\n    rowsById[id] = {\n      id: id,\n      isSelected: isSelected,\n      isExpanded: isExpanded,\n      disabled: disabled,\n      cells: new Array(headers.length)\n    }; // If we have a previous state, and the row existed in that previous state,\n    // then we'll set the state values of the row to the previous state values.\n\n    if (prevRowsByIds && prevRowsByIds[row.id] !== undefined) {\n      rowsById[row.id].isSelected = prevRowsByIds[row.id].isSelected;\n      rowsById[row.id].isExpanded = prevRowsByIds[row.id].isExpanded;\n    }\n\n    headers.forEach(function (_ref, i) {\n      var key = _ref.key;\n      var id = getCellId(row.id, key); // Initialize the cell info and state values, namely for editing\n\n      cellsById[id] = {\n        id: id,\n        value: row[key],\n        isEditable: false,\n        isEditing: false,\n        isValid: true,\n        errors: null,\n        info: {\n          header: key\n        }\n      }; // TODO: When working on inline edits, we'll need to derive the state\n      // values similarly to rows above.\n\n      rowsById[row.id].cells[i] = id;\n    });\n  });\n  return {\n    rowIds: rowIds,\n    rowsById: rowsById,\n    cellsById: cellsById\n  };\n};\n\nexport default normalize;","map":null,"metadata":{},"sourceType":"module"}